{"version":3,"sources":["../../../src/plugins/uploader/file_uploader.js"],"names":[],"mappings":";;;;;AAKA,YAAY,CAAC;;AAEb,IAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;AAE/B,MAAM,CAAC,OAAO,GAAG,UAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAK;;AAEtD,SAAK,CAAC,IAAI,CAAC,KAAK,EAAE,UAAC,IAAI,EAAE,YAAY,EAAK;;AAEtC,YAAM,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AAC1D,YAAM,YAAY,cAAY,IAAI,CAAC,WAAW,CAAC,SAAI,QAAQ,CAAC,GAAG,SAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,UAAU,CAAC,AAAE,CAAC;;AAE7G,gBAAQ,CAAC,MAAM,CAAC,aAAa,EAAE,YAAY,EAAE,UAAC,KAAK,EAAE,GAAG,EAAK;;AAEzD,gBAAI,KAAK,EAAE;AACP,uBAAO,YAAY,CAAC,KAAK,CAAC,CAAC;aAC9B;AACD,oBAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,GAAG,CAAC;AAClC,mBAAO,YAAY,EAAE,CAAC;SACzB,CAAC,CAAC;KAEN,EAAE,QAAQ,CAAC,CAAC;CAChB,CAAC","file":"file_uploader.js","sourcesContent":["/**\n *\n * Updated by uur on 12/01/16.\n */\n\n\"use strict\";\n\nconst Async = require(\"async\");\n\nmodule.exports = (forklift, instance, files, callback) => {\n\n    Async.each(files, (file, eachCallback) => {\n\n        const localFilePath = instance[file[\"schemaKey\"]][\"path\"];\n        const remoteFolder = `files/${file[\"schemaKey\"]}/${instance._id}-${instance[file[\"schemaKey\"]][\"filename\"]}`;\n\n        forklift.upload(localFilePath, remoteFolder, (error, url) => {\n\n            if (error) {\n                return eachCallback(error);\n            }\n            instance[file[\"schemaKey\"]] = url;\n            return eachCallback();\n        });\n\n    }, callback);\n};\n"]}